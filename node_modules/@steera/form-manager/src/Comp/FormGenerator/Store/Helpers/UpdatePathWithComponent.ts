import {Path, PathKey, PathType} from '../../../../Utils/pathUtils';

/**
 * Accepts a path and adds the pathkey component as the last component in path.
 * @param path Current Path with its last node as xx/{index}-addnew
 * @param pathKey Component Identifier
 * @returns updatedPath ComponentPath
 */
export function updatePathWithComponent(
  path: PathType,
  pathKey: PathKey
): PathType {
  const pathNodes = Path.parseToNodes(path);
  const edgePathNode = pathNodes[pathNodes.length - 1];
  const [index] = Path.parseToIndex(edgePathNode);
  const newPathNode = Path.makePathNode(pathKey, index);
  const newPathPrefix = Path.mergePathNodes(
    pathNodes.splice(0, pathNodes.length - 1)
  );
  return Path.addNodeToPath(newPathPrefix, newPathNode);
}
