import React from 'react';
import {TemplateNameProps as Props} from './TemplateName.interface';
import {INPUT} from '../../../../Utils/constants';
import {useAppSelector, useAppDispatch} from '../../StoreProvider';
import {Selector, Action} from '../../Store';

export function TemplateName(props: Props) {
  const templateName = useAppSelector(Selector.getTemplateName);

  const dispatch = useAppDispatch();

  const [input, setInput] = React.useState<string>('');

  React.useEffect(() => {
    setInput(templateName);
  }, [templateName]);

  const onChange: React.ChangeEventHandler<HTMLInputElement> = (e) =>
    setInput(e.target.value);

  const onBlur: React.FocusEventHandler<HTMLInputElement> = (e) =>
    dispatch(Action.onChangeTemplateName(e.target.value));

  return (
    <input
      value={input}
      required={true}
      onBlur={onBlur}
      type={INPUT.TEXT}
      onChange={onChange}
      placeholder='template name'
      className={props.className}
    />
  );
}
