import React from 'react';
import {HeaderProps as Props} from './Header.interface';

import {Selector, Action} from '../Store';
import {useAppSelector, useAppDispatch} from '../StoreProvider';

import {TemplateName} from './TemplateName';
import {PreviewIcon} from './PreviewIcon';
import {Export} from './Export';

import cn from './Header.module.scss';

export function Header(props: Props) {
  const dispatch = useAppDispatch();

  const templateId = useAppSelector(Selector.getTemlateId);

  const template = useAppSelector(Selector.getTemplate);

  const isPreview = useAppSelector(Selector.getIsPreview);

  const onClickIcon = () => {
    dispatch(Action.togglePreview());
  };

  const setTextStyle = () => {
    if (isPreview) {
      return {color: 'rgb(141,133,242)'};
    } else {
      return {color: 'rgb(196, 196, 196)'};
    }
  };

  const setIconStyle = () => {
    if (isPreview) {
      return {boxShadow: '2px 2px 3px 0 rgb(209, 206, 255)'};
    }
  };

  return (
    <header className={cn.header}>
      <div className={cn.header_left}>
        <h1 className={cn.title}>Form Generator</h1>
        <h4 className={cn.subTitle}>Create Your own Forms</h4>
      </div>
      <div className={cn.header_mid}>
        <div className={cn.content}>
          <span className={cn.content_id}>{templateId}</span>
          <TemplateName className={cn.content_name} />
          <Export onExport={props.onExport} className={cn.content_export} />
        </div>
      </div>
      <div className={cn.header_right}>
        <p className={cn.text} style={setTextStyle()}>
          {isPreview ? 'Preview Mode' : 'Click Icon To Show Preview'}
        </p>
        <div className={cn.icon} style={setIconStyle()} onClick={onClickIcon}>
          <PreviewIcon className={cn.icon_item} enabled={isPreview} />
        </div>
      </div>
    </header>
  );
}
