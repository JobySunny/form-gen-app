import React from 'react';
import {FieldsetProps as Props} from './Fieldset.interface';
import {Fieldset as F} from '../../../../Components/Fieldset';

import {useAppDispatch, useAppSelector} from '../../StoreProvider';
import {Action, Selector} from '../../Store';

import cn from './Fieldset.module.scss';

export function Fieldset(props: Props) {
  const dispatch = useAppDispatch();

  const isPreview = useAppSelector(Selector.getIsPreview);

  const selectedPath = useAppSelector(Selector.getSelectedNodePath);

  const mainClass = `${props.mainClass} ${
    isPreview ? '' : selectedPath === props.path ? cn.selected : cn.nopreview
  }`;

  const legendClass = `${cn.label} ${props.legendClass}`;

  const onClick = () => {
    dispatch(Action.selectComponent(props.path));
  };

  return (
    <F
      legendStyle={props.legendStyle}
      legendClass={legendClass}
      mainClass={mainClass}
      style={props.style}
      title={props.title}
      onClick={onClick}>
      {props.children}
    </F>
  );
}
