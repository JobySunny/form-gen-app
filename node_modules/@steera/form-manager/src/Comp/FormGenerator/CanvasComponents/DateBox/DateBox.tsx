import React from 'react';
import {DateBoxProps as Props} from './DateBox.interface';

import {DateBox as DB} from '../../../../Components/DateBox';
import {useAppDispatch, useAppSelector} from '../../StoreProvider';
import {Action, Selector} from '../../Store';

import cn from './DateBox.module.scss';

export function DateBox(props: Props) {
  const dispatch = useAppDispatch();

  const selectedPath = useAppSelector(Selector.getSelectedNodePath);

  const isPreview = useAppSelector(Selector.getIsPreview);

  const className = `${props.className} ${cn.viewOnly}`;

  const onClick = (e: React.MouseEvent) => {
    e.stopPropagation();
    dispatch(Action.selectComponent(props.path));
  };

  const wrapClass = `${cn.opt} ${
    props.path === selectedPath ? cn.selected : ''
  }`;

  const component = (
    <DB
      id={props.id}
      label={props.label}
      name={props.name}
      className={className}
      required={props.required}
      min={props.min}
      max={props.max}
      invalidInputMessage={props.invalidInputMessage}
      disabled={props.disabled}
    />
  );

  if (isPreview) {
    return component;
  } else {
    return (
      <div className={wrapClass} onClick={onClick}>
        {component}
      </div>
    );
  }
}
