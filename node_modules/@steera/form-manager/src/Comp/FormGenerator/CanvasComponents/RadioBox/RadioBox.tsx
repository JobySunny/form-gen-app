import React from 'react';
import {RadioBoxProps as Props} from './RadioBox.interface';

import {RadioBox as RB} from '../../../../Components/RadioBox';
import {useAppDispatch, useAppSelector} from '../../StoreProvider';
import {Action, Selector} from '../../Store';

import cn from './RadioBox.module.scss';

export function RadioBox(props: Props) {
  const dispatch = useAppDispatch();

  const isPreview = useAppSelector(Selector.getIsPreview);

  const selectedPath = useAppSelector(Selector.getSelectedNodePath);

  const className = `${props.className} ${cn.viewOnly}`;

  const onClick = (e: React.MouseEvent) => {
    e.stopPropagation();
    dispatch(Action.selectComponent(props.path));
  };

  const wrapClass = `${cn.opt} ${
    props.path === selectedPath ? cn.selected : ''
  }`;

  const component = (
    <RB
      id={props.id}
      label={props.label}
      name={props.name}
      className={className}
      required={props.required}
      invalidInputMessage={props.invalidInputMessage}
      isSubmitted={props.isSubmitted}
      disabled={props.disabled}
      checked={props.checked}
      value={props.value}
    />
  );

  if (isPreview) {
    return component;
  } else {
    return (
      <div className={wrapClass} onClick={onClick}>
        {component}
      </div>
    );
  }
}
