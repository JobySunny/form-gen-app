import React from 'react';
import {BoxProps as Props} from './Box.interface';
import {Box as B} from '../../../../Components/Box';

import {useAppDispatch, useAppSelector} from '../../StoreProvider';
import {Action, Selector} from '../../Store';

import cn from './Box.module.scss';

export function Box(props: Props) {
  const dispatch = useAppDispatch();

  const isPreview = useAppSelector(Selector.getIsPreview);

  const selectedPath = useAppSelector(Selector.getSelectedNodePath);


  const className = `${
    isPreview ? '' : selectedPath === props.path ? cn.selected : cn.nopreview
  }`;

  const onClick = () => {
    dispatch(Action.selectComponent(props.path));
  };

  return (
    <B className={className} style={props.style} onClick={onClick}>
      {props.children}
    </B>
  );
}
