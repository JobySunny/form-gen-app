import React from 'react';
import {TitleProps as Props} from './Title.interface';

import {Title as TB} from '../../../../Components/Title';
import {useAppDispatch, useAppSelector} from '../../StoreProvider';
import {Action, Selector} from '../../Store';

import cn from './Title.module.scss';

export function Title(props: Props) {
  const dispatch = useAppDispatch();

  const isPreview = useAppSelector(Selector.getIsPreview);

  const selectedPath = useAppSelector(Selector.getSelectedNodePath);

  const className = `${props.className} ${cn.viewOnly}`;

  const onClick = (e: React.MouseEvent) => {
    e.stopPropagation();
    dispatch(Action.selectComponent(props.path));
  };

  const wrapClass = `${cn.opt} ${
    props.path === selectedPath ? cn.selected : ''
  }`;

  const component = (
    <TB id={props.id} Value={props.Value} style={props.style} className={className} />
  );

  if (isPreview) {
    return component;
  } else {
    return (
      <div className={wrapClass} onClick={onClick}>
        {component}
      </div>
    );
  }
}
