import * as React from 'react';
import cn from './SelectBox.module.scss';
import {SelectBoxProps} from './SelectBox.interface';

import {Block} from './Block';
import {Label} from '../Label';
import {Hint} from '../Hint';
import {SelectInput as Select} from '../SelectInput';

export function SelectBox(props: SelectBoxProps): JSX.Element {
  const [valid, setValid] = React.useState(true);

  const getClassName = (ele = '') =>
    `${cn[`asb${ele}`]} ${props.className}${ele}`;

  const getHintShow = (): boolean => {
    if (props.isSubmitted) {
      return !valid;
    } else return false;
  };

  return (
    <Block className={getClassName('')}>
      <Label
        for={props.id}
        text={props.label}
        required={props.required}
        className={getClassName('_label')}
      />
      <Select
        id={props.id}
        name={props.name}
        value={props.value}
        options={props.options}
        onChange={props.onChange}
        disabled={props.disabled}
        required={props.required}
        placeholder={props.placeholder}
        testId={`${props.testId}_select`}
        className={getClassName('_select')}
      />
      <Hint
        show={getHintShow()}
        message={props.invalidInputMessage}
        className={getClassName('_hint')}
      />
    </Block>
  );
}
