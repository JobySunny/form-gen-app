import React from 'react';
import {SwitchProps as Props} from './Switch.interface';

import {Input} from './Input';
import {Knob} from './Knob';
import {Wrap} from './Wrap';

import cn from './Switch.module.scss';

export function Switch(props: Props) {
  const onChange: React.ChangeEventHandler<HTMLInputElement> = (e) => {
    props.onChange(
      {
        name: e.target.name,
        value: e.target.value,
        checked: e.target.checked,
      },
      e
    );
  };

  const wrapClassName = `${cn.sw} ${props.checked ? cn.swOn : cn.swOff} ${
    props.className
  }`;

  const inputClassName = `${cn.sw_input} ${props.className}-input`;

  const knobClassName = `${cn.sw_knob} ${props.className}-knob`;

  return (
    <Wrap className={wrapClassName}>
      <Input
        id={props.id}
        name={props.name}
        value={props.value}
        onChange={onChange}
        checked={props.checked}
        className={inputClassName}
      />
      <Knob className={knobClassName} />
    </Wrap>
  );
}
